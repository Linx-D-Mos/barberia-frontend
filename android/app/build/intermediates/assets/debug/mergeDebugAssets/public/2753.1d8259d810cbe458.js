"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2753],{1125:(P,f,t)=>{t.d(f,{u:()=>k});var s=t(467),d=t(5149),a=t(8458),v=t(4558),A=t(3953),g=t(6394),c=t(5083);const T=(0,c.F3)("Preferences",{web:()=>t.e(2924).then(t.bind(t,2924)).then(u=>new u.PreferencesWeb)});var h=t(8638),_=t(5079),m=t(5873),C=t(4412),l=t(7669);let k=(()=>{var u,y=new WeakMap,D=new WeakMap,O=new WeakMap,p=new WeakMap,E=new WeakMap;class U{constructor(){(0,d.A)(this,y,void 0),(0,d.A)(this,D,void 0),(0,d.A)(this,O,void 0),(0,d.A)(this,p,void 0),(0,d.A)(this,E,void 0),this.emailShared=null,(0,v.A)(y,this,(0,A.WQX)(g.Ix)),(0,v.A)(D,this,(0,A.WQX)(h.hG)),(0,v.A)(O,this,(0,A.WQX)(h.K_)),(0,v.A)(p,this,[]),(0,v.A)(E,this,new C.t(null)),(0,_.a)({alertCircle:m.nVl})}setEmail(e){this.emailShared=e}getEmail(){return this.emailShared}get token(){return(0,a.A)(E,this).asObservable()}actualizarToken(e){(0,a.A)(E,this).next(e)}actualizarTokenEnLocal(e){return(0,s.A)(function*(){yield T.set({key:"token",value:e})})()}establecerToken(e){this.actualizarToken(e),this.actualizarTokenEnLocal(e)}obtenerToken(){return(0,s.A)(function*(){const e=yield T.get({key:"token"});if(!e)throw new Error("Token no encontrado");return e.value})()}eliminarToken(){var e=this;return(0,s.A)(function*(){e.actualizarToken(null),yield T.remove({key:"token"})})()}register(e){var r=this;return(0,s.A)(function*(){const i={url:l.c.serverUrl+"auth/register",headers:{"Content-Type":"application/json"},data:JSON.stringify(e)};try{var o;const n=yield c.pX.post(i);return r.establecerToken(null==n||null===(o=n.data)||void 0===o?void 0:o.token),n}catch(n){throw n}})()}login(e){var r=this;return(0,s.A)(function*(){const i={url:l.c.serverUrl+"auth/login",headers:{"Content-Type":"application/json"},data:JSON.stringify(e)};try{var o;const n=yield c.pX.post(i);return r.establecerToken(null==n||null===(o=n.data)||void 0===o?void 0:o.token),n}catch(n){throw n}})()}logout(){var e=this;return(0,s.A)(function*(){const r=yield e.obtenerToken(),i={url:l.c.serverUrl+"auth/logout",headers:{Authorization:`Bearer ${r}`}};try{return yield c.pX.get(i)}catch(o){throw o}})()}perfil(){var e=this;return(0,s.A)(function*(){const r=yield e.obtenerToken(),i={url:l.c.serverUrl+"auth/profile",headers:{Authorization:`Bearer ${r}`}};try{return yield c.pX.get(i)}catch(o){throw o}})()}showAlert(e){var r=this;return(0,s.A)(function*(){yield(yield(0,a.A)(D,r).create({header:"Error de Autenticacion",message:e,buttons:["OK"]})).present()})()}navigateByUrl(e){(0,a.A)(y,this).navigateByUrl(e,{replaceUrl:!0})}showToast(e){var r=this;return(0,s.A)(function*(){const i=yield(0,a.A)(O,r).create({message:e,position:"top",positionAnchor:"header",duration:3e3,icon:"alert-circle",color:"primary"});(0,a.A)(p,r).push(i),1===(0,a.A)(p,r).length&&r.showNextToast()})()}showNextToast(){var e=this;return(0,s.A)(function*(){if((0,a.A)(p,e).length>0){const r=(0,a.A)(p,e)[0];yield r.present(),r.onDidDismiss().then(()=>{(0,a.A)(p,e).shift(),e.showNextToast()})}})()}verificarEmail(e){return(0,s.A)(function*(){const r={url:l.c.serverUrl+"auth/send_reset_password_code",headers:{"Content-Type":"application/json"},data:JSON.stringify(e)};try{return yield c.pX.post(r)}catch(i){throw i}})()}verifyCodeChangePasswd(e){var r=this;return(0,s.A)(function*(){const i={url:l.c.serverUrl+"auth/verify_reset_password_code",headers:{"Content-Type":"application/json"},data:JSON.stringify(e)};try{var o;const n=yield c.pX.post(i);return r.establecerToken(null==n||null===(o=n.data)||void 0===o?void 0:o.token),n}catch(n){throw n}})()}changePasswd(e){var r=this;return(0,s.A)(function*(){const i=yield r.obtenerToken(),o={url:l.c.serverUrl+"auth/reset_password",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},data:JSON.stringify(e)};try{return yield c.pX.put(o)}catch(n){throw n}})()}}return(u=U).\u0275fac=function(e){return new(e||u)},u.\u0275prov=A.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),U})()},2753:(P,f,t)=>{t.d(f,{X:()=>T});var s=t(467),d=t(5149),a=t(8458),v=t(3953),A=t(5083),g=t(7669),c=t(1125);let T=(()=>{var h,_=new WeakMap;class m{constructor(){(0,d.A)(this,_,(0,v.WQX)(c.u))}profile(){var l=this;return(0,s.A)(function*(){const k=yield(0,a.A)(_,l).obtenerToken(),u={url:g.c.serverUrl+"client/profile",headers:{Authorization:`Bearer ${k}`}};try{return yield A.pX.get(u)}catch(y){throw y}})()}}return(h=m).\u0275fac=function(l){return new(l||h)},h.\u0275prov=v.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),m})()},7669:(P,f,t)=>{t.d(f,{c:()=>s});const s={production:!0,serverUrl:"https://valiant-luck-production.up.railway.app/api/"}}}]);