"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6387],{6387:(N,k,r)=>{r.r(k),r.d(k,{CitasPage:()=>_});var v=r(467),t=r(3953),p=r(8880),x=r(177),P=r(4341),I=r(5079),m=r(5873),b=r(5083),M=r(6648),O=r(8359);class D extends O.yU{constructor(n,i){super()}schedule(n,i=0){return this}}const T={setInterval(s,n,...i){const{delegate:e}=T;return null!=e&&e.setInterval?e.setInterval(s,n,...i):setInterval(s,n,...i)},clearInterval(s){const{delegate:n}=T;return((null==n?void 0:n.clearInterval)||clearInterval)(s)},delegate:void 0};var y=r(7908);const g={now:()=>(g.delegate||Date).now(),delegate:void 0};class A{constructor(n,i=A.now){this.schedulerActionCtor=n,this.now=i}schedule(n,i=0,e){return new this.schedulerActionCtor(this,n).schedule(e,i)}}A.now=g.now;const S=new class F extends A{constructor(n,i=A.now){super(n,i),this.actions=[],this._active=!1}flush(n){const{actions:i}=this;if(this._active)return void i.push(n);let e;this._active=!0;do{if(e=n.execute(n.state,n.delay))break}while(n=i.shift());if(this._active=!1,e){for(;n=i.shift();)n.unsubscribe();throw e}}}(class X extends D{constructor(n,i){super(n,i),this.scheduler=n,this.work=i,this.pending=!1}schedule(n,i=0){var e;if(this.closed)return this;this.state=n;const a=this.id,f=this.scheduler;return null!=a&&(this.id=this.recycleAsyncId(f,a,i)),this.pending=!0,this.delay=i,this.id=null!==(e=this.id)&&void 0!==e?e:this.requestAsyncId(f,this.id,i),this}requestAsyncId(n,i,e=0){return T.setInterval(n.flush.bind(n,this),e)}recycleAsyncId(n,i,e=0){if(null!=e&&this.delay===e&&!1===this.pending)return i;null!=i&&T.clearInterval(i)}execute(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const e=this._execute(n,i);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,i){let a,e=!1;try{this.work(n)}catch(f){e=!0,a=f||new Error("Scheduled action threw falsy error")}if(e)return this.unsubscribe(),a}unsubscribe(){if(!this.closed){const{id:n,scheduler:i}=this,{actions:e}=i;this.work=this.state=this.scheduler=null,this.pending=!1,(0,y.o)(e,this),null!=n&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,super.unsubscribe()}}}),C=S;var w=r(8793),j=r(6697),E=r(9974),o=r(4360),l=r(5343),d=r(3703),c=r(1397),U=r(8750);function G(s,n){return n?i=>(0,w.x)(n.pipe((0,j.s)(1),function u(){return(0,E.N)((s,n)=>{s.subscribe((0,o._)(n,l.l))})}()),i.pipe(G(s))):(0,c.Z)((i,e)=>(0,U.Tg)(s(i,e)).pipe((0,j.s)(1),(0,d.u)(i)))}var R=r(1985),W=r(9470);var L=r(8141),Y=r(1125),J=r(1431),h=r(4742);function V(s,n){if(1&s&&t.EFF(0),2&s){const i=t.XpG();t.SpI(" ",null==i.perfil||null==i.perfil.datum?null:i.perfil.datum.name," ")}}function Q(s,n){1&s&&(t.j41(0,"p"),t.nrm(1,"ion-skeleton-text",6),t.k0s()),2&s&&(t.R7$(),t.Y8G("animated",!0))}function H(s,n){if(1&s){const i=t.RV6();t.j41(0,"ion-card",5)(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3),t.k0s(),t.j41(4,"ion-card-subtitle"),t.EFF(5),t.k0s(),t.j41(6,"ion-card-subtitle"),t.EFF(7),t.k0s()(),t.j41(8,"ion-card-content",8)(9,"div",9)(10,"ion-button",10),t.bIt("click",function(){t.eBV(i);const a=t.XpG(2);return t.Njj(a.openShare())}),t.EFF(11,"Detalles"),t.k0s()()()()}if(2&s){const i=n.$implicit,e=t.XpG(2);t.R7$(3),t.JRh(i.name),t.R7$(2),t.SpI("Fecha: ",e.date,""),t.R7$(2),t.SpI("Hora: ",e.time,"")}}function K(s,n){if(1&s&&t.DNE(0,H,12,3,"ion-card",7),2&s){const i=t.XpG();t.Y8G("ngForOf",i.users)}}function Z(s,n){1&s&&(t.j41(0,"ion-list",11)(1,"ion-item")(2,"ion-label")(3,"h1"),t.nrm(4,"ion-skeleton-text",12),t.k0s(),t.j41(5,"p"),t.nrm(6,"ion-skeleton-text",13),t.k0s(),t.j41(7,"p"),t.nrm(8,"ion-skeleton-text",13),t.k0s(),t.j41(9,"p"),t.nrm(10,"ion-skeleton-text",14),t.k0s()()()()),2&s&&(t.R7$(4),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0),t.R7$(2),t.Y8G("animated",!0))}function q(s,n){if(1&s&&t.Z7z(0,Z,11,4,"ion-list",11,t.Vm6),2&s){const i=t.XpG();t.Dyx(i.ionContentList)}}let _=(()=>{var s;class n{constructor(e,a,f){this.actionSheetController=e,this.alertController=a,this.modalController=f,this.users=[],this.time="",this.date="",this.loaded=!1,this.ionContentList=[1,2,3,4,5,6,7,8],this.nav=(0,t.WQX)(p.q9),this.authService=(0,t.WQX)(Y.u),(0,I.a)({personCircleOutline:m.kki})}ngOnInit(){this.date=(new Date).toLocaleDateString(),this.cargarDatos().subscribe(),this.getPerfil()}openShare(){var e=this;return(0,v.A)(function*(){const a=yield e.modalController.create({component:J.A,initialBreakpoint:1,breakpoints:[0,1],cssClass:"my-custom-class"});return a.onDidDismiss().then(()=>{e.closeShare(a)}),yield a.present()})()}closeShare(e){return(0,v.A)(function*(){yield e.dismiss()})()}cargarDatos(){return(0,M.H)(b.pX.get({url:"https://jsonplaceholder.typicode.com/users"})).pipe(function B(s,n=S){const i=function $(s=0,n,i=C){let e=-1;return null!=n&&((0,W.m)(n)?i=n:e=n),new R.c(a=>{let f=function z(s){return s instanceof Date&&!isNaN(s)}(s)?+s-i.now():s;f<0&&(f=0);let tt=0;return i.schedule(function(){a.closed||(a.next(tt++),0<=e?this.schedule(void 0,e):a.complete())},f)})}(s,n);return G(()=>i)}(3e3),(0,L.M)(a=>{this.users=a.data,this.loaded=!0}))}getCurrentDateTime(){const e=new Date;return{date:e.toLocaleDateString(),time:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}}profile(){this.nav.navigateForward("client/perfil")}getPerfil(){this.authService.perfil().then(e=>{var a;1===(null==e||null===(a=e.data)||void 0===a?void 0:a.success)?this.perfil=e.data:this.authService.showAlert("Su token de acceso ya no es valido, por favor inicie sesi\xf3n nuevamente.")}).catch(e=>{var a;this.authService.showAlert(null==e||null===(a=e.error)||void 0===a?void 0:a.message)})}}return(s=n).\u0275fac=function(e){return new(e||s)(t.rXU(h.GD),t.rXU(h.hG),t.rXU(h.W3))},s.\u0275cmp=t.VBU({type:s,selectors:[["app-citas"]],standalone:!0,features:[t.aNF],decls:13,vars:5,consts:[[1,"container"],["routerLink","/home","src","assets/logo.webp",1,"logo"],[1,"name"],["name","person-circle-outline","size","large",1,"account",3,"click"],[3,"fullscreen"],[1,"cartas"],[2,"width","80%","height","1em",3,"animated"],["class","cartas",4,"ngFor","ngForOf"],[1,"card-content"],[1,"info"],[1,"aceptar",3,"click"],[2,"width","100%","height","auto","padding","4%"],[2,"width","50%","height","1.3rem",3,"animated"],[2,"width","30%","height","1.1rem",3,"animated"],[2,"border-radius","5px","width","36%","height","2.2rem","background-color","rgb(226, 226, 226)","margin-left","60%",3,"animated"]],template:function(e,a){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"div",0),t.nrm(3,"ion-img",1),t.j41(4,"ion-label",2),t.EFF(5," Bienvenido "),t.nrm(6,"br"),t.DNE(7,V,1,1)(8,Q,2,1,"p"),t.k0s(),t.j41(9,"ion-icon",3),t.bIt("click",function(){return a.profile()}),t.k0s()()()(),t.j41(10,"ion-content",4),t.DNE(11,K,1,1,"ion-card",5)(12,q,2,0),t.k0s()),2&e&&(t.R7$(7),t.vxM(a.loaded?7:-1),t.R7$(),t.vxM(a.loaded?-1:8),t.R7$(2),t.Y8G("fullscreen",!0),t.R7$(),t.vxM(a.loaded?11:-1),t.R7$(),t.vxM(a.loaded?-1:12))},dependencies:[x.MD,x.Sq,P.YN,h.bv,h.Jm,h.b_,h.I9,h.ME,h.HW,h.tN,h.W9,h.eU,h.iq,h.KW,h.uz,h.he,h.nf,h.ds,h.ai,h.N7],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.container[_ngcontent-%COMP%]{padding-left:4%;padding-right:4%;width:100%;display:flex;align-items:center;justify-content:space-between}.container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:80px;height:80px}.container[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100px;height:100px}.name[_ngcontent-%COMP%]{font-size:17px;text-align:center;flex-grow:1}ion-skeleton-text[_ngcontent-%COMP%]{--border-radius: 9999px;--background: rgba(188, 0, 255, .065);--background-rgb: 188, 0, 255}.skeleton[_ngcontent-%COMP%]{--background: rgba(255, 0, 0, .065);--border-radius: 20px}.cartas[_ngcontent-%COMP%]{background-color:#cdcdcd;border-radius:15px;margin:6%}.card-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;align-items:center}.aceptar[_ngcontent-%COMP%]{margin-left:auto;font-size:18px;font-weight:700;font-family:PT Sans,sans-serif;font-style:normal;text-transform:capitalize;--background: #2C2C2C}']}),n})()},1125:(N,k,r)=>{r.d(k,{u:()=>X});var v=r(467),t=r(5149),p=r(8458),x=r(4558),P=r(3953),I=r(6394),m=r(5083);const b=(0,m.F3)("Preferences",{web:()=>r.e(2924).then(r.bind(r,2924)).then(g=>new g.PreferencesWeb)});var M=r(8638),O=r(5079),D=r(5873),T=r(4412),y=r(7669);let X=(()=>{var g,A=new WeakMap,F=new WeakMap,S=new WeakMap,C=new WeakMap,w=new WeakMap;class j{constructor(){(0,t.A)(this,A,void 0),(0,t.A)(this,F,void 0),(0,t.A)(this,S,void 0),(0,t.A)(this,C,void 0),(0,t.A)(this,w,void 0),this.emailShared=null,(0,x.A)(A,this,(0,P.WQX)(I.Ix)),(0,x.A)(F,this,(0,P.WQX)(M.hG)),(0,x.A)(S,this,(0,P.WQX)(M.K_)),(0,x.A)(C,this,[]),(0,x.A)(w,this,new T.t(null)),(0,O.a)({alertCircle:D.nVl})}setEmail(o){this.emailShared=o}getEmail(){return this.emailShared}get token(){return(0,p.A)(w,this).asObservable()}actualizarToken(o){(0,p.A)(w,this).next(o)}actualizarTokenEnLocal(o){return(0,v.A)(function*(){yield b.set({key:"token",value:o})})()}establecerToken(o){this.actualizarToken(o),this.actualizarTokenEnLocal(o)}obtenerToken(){return(0,v.A)(function*(){const o=yield b.get({key:"token"});if(!o)throw new Error("Token no encontrado");return o.value})()}eliminarToken(){var o=this;return(0,v.A)(function*(){o.actualizarToken(null),yield b.remove({key:"token"})})()}register(o){var l=this;return(0,v.A)(function*(){const u={url:y.c.serverUrl+"auth/register",headers:{"Content-Type":"application/json"},data:JSON.stringify(o)};try{var d;const c=yield m.pX.post(u);return l.establecerToken(null==c||null===(d=c.data)||void 0===d?void 0:d.token),c}catch(c){throw c}})()}login(o){var l=this;return(0,v.A)(function*(){const u={url:y.c.serverUrl+"auth/login",headers:{"Content-Type":"application/json"},data:JSON.stringify(o)};try{var d;const c=yield m.pX.post(u);return l.establecerToken(null==c||null===(d=c.data)||void 0===d?void 0:d.token),c}catch(c){throw c}})()}logout(){var o=this;return(0,v.A)(function*(){const l=yield o.obtenerToken(),u={url:y.c.serverUrl+"auth/logout",headers:{Authorization:`Bearer ${l}`}};try{return yield m.pX.get(u)}catch(d){throw d}})()}perfil(){var o=this;return(0,v.A)(function*(){const l=yield o.obtenerToken(),u={url:y.c.serverUrl+"auth/profile",headers:{Authorization:`Bearer ${l}`}};try{return yield m.pX.get(u)}catch(d){throw d}})()}showAlert(o){var l=this;return(0,v.A)(function*(){yield(yield(0,p.A)(F,l).create({header:"Error de Autenticacion",message:o,buttons:["OK"]})).present()})()}navigateByUrl(o){(0,p.A)(A,this).navigateByUrl(o,{replaceUrl:!0})}showToast(o){var l=this;return(0,v.A)(function*(){const u=yield(0,p.A)(S,l).create({message:o,position:"top",positionAnchor:"header",duration:3e3,icon:"alert-circle",color:"primary"});(0,p.A)(C,l).push(u),1===(0,p.A)(C,l).length&&l.showNextToast()})()}showNextToast(){var o=this;return(0,v.A)(function*(){if((0,p.A)(C,o).length>0){const l=(0,p.A)(C,o)[0];yield l.present(),l.onDidDismiss().then(()=>{(0,p.A)(C,o).shift(),o.showNextToast()})}})()}verificarEmail(o){return(0,v.A)(function*(){const l={url:y.c.serverUrl+"auth/send_reset_password_code",headers:{"Content-Type":"application/json"},data:JSON.stringify(o)};try{return yield m.pX.post(l)}catch(u){throw u}})()}verifyCodeChangePasswd(o){var l=this;return(0,v.A)(function*(){const u={url:y.c.serverUrl+"auth/verify_reset_password_code",headers:{"Content-Type":"application/json"},data:JSON.stringify(o)};try{var d;const c=yield m.pX.post(u);return l.establecerToken(null==c||null===(d=c.data)||void 0===d?void 0:d.token),c}catch(c){throw c}})()}changePasswd(o){var l=this;return(0,v.A)(function*(){const u=yield l.obtenerToken(),d={url:y.c.serverUrl+"auth/reset_password",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},data:JSON.stringify(o)};try{return yield m.pX.put(d)}catch(c){throw c}})()}}return(g=j).\u0275fac=function(o){return new(o||g)},g.\u0275prov=P.jDH({token:g,factory:g.\u0275fac,providedIn:"root"}),j})()},7669:(N,k,r)=>{r.d(k,{c:()=>v});const v={production:!0,serverUrl:"https://valiant-luck-production.up.railway.app/api/"}}}]);