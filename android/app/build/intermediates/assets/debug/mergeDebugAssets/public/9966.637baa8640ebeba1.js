"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9966],{9966:(O,y,e)=>{e.r(y),e.d(y,{LoginPage:()=>b});var t=e(3953),p=e(6394),s=e(8638),l=e(4341),A=e(1125);function w(d,m){1&d&&t.nrm(0,"ion-input-password-toggle",7)}function g(d,m){1&d&&(t.j41(0,"ion-button"),t.nrm(1,"ion-spinner",18),t.k0s())}function P(d,m){if(1&d){const v=t.RV6();t.j41(0,"ion-button",19),t.bIt("click",function(){t.eBV(v);const u=t.XpG();return t.Njj(u.login())}),t.EFF(1," Iniciemos "),t.k0s()}if(2&d){const v=t.XpG();t.Y8G("disabled",v.loginForm.invalid)}}let b=(()=>{var d;class m{constructor(){this.isLogin=!1,this.authService=(0,t.WQX)(A.u)}ngOnInit(){this.loginForm=new l.gE({email:new l.MJ("",[l.k0.required,l.k0.email]),password:new l.MJ("",[l.k0.required])})}login(){this.isLogin=!0,this.authService.login(this.loginForm.value).then(o=>{var u,h;1===(null==o||null===(u=o.data)||void 0===u?void 0:u.success)?(this.authService.navigateByUrl("client/citas"),this.isLogin=!1,this.loginForm.reset()):(this.isLogin=!1,this.authService.showToast(null==o||null===(h=o.data)||void 0===h?void 0:h.message))}).catch(o=>{var u;this.isLogin=!1,this.authService.showToast(null==o||null===(u=o.error)||void 0===u?void 0:u.message)})}onInput(o){this.pass=o.target.value}}return(d=m).\u0275fac=function(o){return new(o||d)},d.\u0275cmp=t.VBU({type:d,selectors:[["app-home"]],standalone:!0,features:[t.aNF],decls:22,vars:4,consts:[[3,"fullscreen"],[1,"content"],[1,"secundario"],["src","assets/logo.webp","alt","Logo",1,"logo"],[3,"formGroup"],["formControlName","email","type","email","inputmode","email","label","Correo","labelPlacement","floating","fill","outline"],["formControlName","password","label","Contrase\xf1a","labelPlacement","floating","clearOnEdit","false","fill","outline","type","password",1,"con",3,"ionInput"],["color","medium","slot","end"],[1,"iniciemos"],[3,"disabled"],[1,"olvide"],["routerLink","../recuperar"],[1,"unete"],["routerLink","../registro"],[1,"seccion"],[1,"apps"],["src","assets/google.webp"],["src","assets/facebook.webp"],["name","lines-small"],[3,"click","disabled"]],template:function(o,u){1&o&&(t.j41(0,"ion-content",0)(1,"div",1)(2,"div",2),t.nrm(3,"ion-img",3),t.j41(4,"form",4),t.nrm(5,"ion-input",5),t.j41(6,"ion-input",6),t.bIt("ionInput",function(C){return u.onInput(C)}),t.DNE(7,w,1,0,"ion-input-password-toggle",7),t.k0s()(),t.j41(8,"div",8),t.DNE(9,g,2,0,"ion-button")(10,P,2,1,"ion-button",9),t.k0s(),t.j41(11,"div",10)(12,"ion-label",11),t.EFF(13," \xbfHas olvidado tu Contrase\xf1a? "),t.k0s()(),t.j41(14,"div",12)(15,"ion-button",13),t.EFF(16," Unete a nosotros "),t.k0s()(),t.j41(17,"ion-label",14),t.EFF(18," Iniciar Sesi\xf3n Con: "),t.k0s(),t.j41(19,"div",15),t.nrm(20,"ion-img",16)(21,"ion-img",17),t.k0s()()()()),2&o&&(t.Y8G("fullscreen",!0),t.R7$(4),t.Y8G("formGroup",u.loginForm),t.R7$(3),t.vxM(u.pass?7:-1),t.R7$(2),t.vxM(u.isLogin?9:10))},dependencies:[s.Wv,s.w2,l.X1,l.qT,l.BC,l.cb,l.j4,l.JD,s.he,s.Jm,s.KW,s.$w,s.W9,p.iI,p.Wk],styles:[".content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;margin-top:-3vh}.secundario[_ngcontent-%COMP%]{width:100vh}ion-img[_ngcontent-%COMP%]{max-width:350px;max-height:350px;width:70%;height:70%;margin:auto}ion-input[_ngcontent-%COMP%]{width:80%;max-width:20rem;display:block;margin:auto}.con[_ngcontent-%COMP%]{margin-top:1.5rem}ion-button[_ngcontent-%COMP%]{--border-width: 1px;--border-radius: 10px;--border-style: solid;--border-color: #b9b9b956;--box-shadow: 0 4px 8px 0 rgb(0, 0, 0, .25);--ripple-color: #7e7c7c;--padding-top: 10px;--padding-bottom: 10px;text-transform:none;width:80%;max-width:20rem}.iniciemos[_ngcontent-%COMP%], .unete[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0}.iniciemos[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:1.5rem;height:3rem;margin-bottom:1.3rem;--background: #b6b6b6;--color: black;font-size:1.7rem;font-weight:700}.olvide[_ngcontent-%COMP%]{display:flex;justify-content:center}.unete[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:6%;margin-bottom:.8rem;--background: #606160;font-size:larger}.seccion[_ngcontent-%COMP%]{padding-top:5%;display:flex;justify-content:center;font-size:20px}.apps[_ngcontent-%COMP%]{padding-top:4%;display:flex;justify-content:space-between;padding-left:27%;padding-right:27%}.apps[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:35px;height:35px}"]}),m})()},1125:(O,y,e)=>{e.d(y,{u:()=>u});var t=e(467),p=e(5149),s=e(8458),l=e(4558),A=e(3953),w=e(6394),g=e(5083);const P=(0,g.F3)("Preferences",{web:()=>e.e(2924).then(e.bind(e,2924)).then(h=>new h.PreferencesWeb)});var b=e(8638),d=e(5079),m=e(5873),v=e(4412),o=e(7669);let u=(()=>{var h,C=new WeakMap,T=new WeakMap,M=new WeakMap,f=new WeakMap,k=new WeakMap;class x{constructor(){(0,p.A)(this,C,void 0),(0,p.A)(this,T,void 0),(0,p.A)(this,M,void 0),(0,p.A)(this,f,void 0),(0,p.A)(this,k,void 0),this.emailShared=null,(0,l.A)(C,this,(0,A.WQX)(w.Ix)),(0,l.A)(T,this,(0,A.WQX)(b.hG)),(0,l.A)(M,this,(0,A.WQX)(b.K_)),(0,l.A)(f,this,[]),(0,l.A)(k,this,new v.t(null)),(0,d.a)({alertCircle:m.nVl})}setEmail(n){this.emailShared=n}getEmail(){return this.emailShared}get token(){return(0,s.A)(k,this).asObservable()}actualizarToken(n){(0,s.A)(k,this).next(n)}actualizarTokenEnLocal(n){return(0,t.A)(function*(){yield P.set({key:"token",value:n})})()}establecerToken(n){this.actualizarToken(n),this.actualizarTokenEnLocal(n)}obtenerToken(){return(0,t.A)(function*(){const n=yield P.get({key:"token"});if(!n)throw new Error("Token no encontrado");return n.value})()}eliminarToken(){var n=this;return(0,t.A)(function*(){n.actualizarToken(null),yield P.remove({key:"token"})})()}register(n){var i=this;return(0,t.A)(function*(){const c={url:o.c.serverUrl+"auth/register",headers:{"Content-Type":"application/json"},data:JSON.stringify(n)};try{var a;const r=yield g.pX.post(c);return i.establecerToken(null==r||null===(a=r.data)||void 0===a?void 0:a.token),r}catch(r){throw r}})()}login(n){var i=this;return(0,t.A)(function*(){const c={url:o.c.serverUrl+"auth/login",headers:{"Content-Type":"application/json"},data:JSON.stringify(n)};try{var a;const r=yield g.pX.post(c);return i.establecerToken(null==r||null===(a=r.data)||void 0===a?void 0:a.token),r}catch(r){throw r}})()}logout(){var n=this;return(0,t.A)(function*(){const i=yield n.obtenerToken(),c={url:o.c.serverUrl+"auth/logout",headers:{Authorization:`Bearer ${i}`}};try{return yield g.pX.get(c)}catch(a){throw a}})()}perfil(){var n=this;return(0,t.A)(function*(){const i=yield n.obtenerToken(),c={url:o.c.serverUrl+"auth/profile",headers:{Authorization:`Bearer ${i}`}};try{return yield g.pX.get(c)}catch(a){throw a}})()}showAlert(n){var i=this;return(0,t.A)(function*(){yield(yield(0,s.A)(T,i).create({header:"Error de Autenticacion",message:n,buttons:["OK"]})).present()})()}navigateByUrl(n){(0,s.A)(C,this).navigateByUrl(n,{replaceUrl:!0})}showToast(n){var i=this;return(0,t.A)(function*(){const c=yield(0,s.A)(M,i).create({message:n,position:"top",positionAnchor:"header",duration:3e3,icon:"alert-circle",color:"primary"});(0,s.A)(f,i).push(c),1===(0,s.A)(f,i).length&&i.showNextToast()})()}showNextToast(){var n=this;return(0,t.A)(function*(){if((0,s.A)(f,n).length>0){const i=(0,s.A)(f,n)[0];yield i.present(),i.onDidDismiss().then(()=>{(0,s.A)(f,n).shift(),n.showNextToast()})}})()}verificarEmail(n){return(0,t.A)(function*(){const i={url:o.c.serverUrl+"auth/send_reset_password_code",headers:{"Content-Type":"application/json"},data:JSON.stringify(n)};try{return yield g.pX.post(i)}catch(c){throw c}})()}verifyCodeChangePasswd(n){var i=this;return(0,t.A)(function*(){const c={url:o.c.serverUrl+"auth/verify_reset_password_code",headers:{"Content-Type":"application/json"},data:JSON.stringify(n)};try{var a;const r=yield g.pX.post(c);return i.establecerToken(null==r||null===(a=r.data)||void 0===a?void 0:a.token),r}catch(r){throw r}})()}changePasswd(n){var i=this;return(0,t.A)(function*(){const c=yield i.obtenerToken(),a={url:o.c.serverUrl+"auth/reset_password",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},data:JSON.stringify(n)};try{return yield g.pX.put(a)}catch(r){throw r}})()}}return(h=x).\u0275fac=function(n){return new(n||h)},h.\u0275prov=A.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),x})()},7669:(O,y,e)=>{e.d(y,{c:()=>t});const t={production:!0,serverUrl:"https://valiant-luck-production.up.railway.app/api/"}}}]);