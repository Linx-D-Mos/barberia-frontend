"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9314],{9314:(b,y,o)=>{o.r(y),o.d(y,{RegistroPage:()=>T,createPasswordStrengthValidator:()=>w,passwordMatchValidator:()=>P});var t=o(3953),m=o(177),n=o(4341),f=o(5079),A=o(5873),h=o(4742),p=o(1125),C=o(6394),E=o(4831),M=o(9763);const k=()=>["../login"];function _(a,c){1&a&&t.nrm(0,"ion-input-password-toggle",10)}function v(a,c){1&a&&t.nrm(0,"ion-input-password-toggle",10)}function O(a,c){1&a&&(t.j41(0,"ion-button"),t.nrm(1,"ion-spinner",14),t.k0s())}function g(a,c){if(1&a){const d=t.RV6();t.j41(0,"ion-button",15),t.bIt("click",function(){t.eBV(d);const e=t.XpG();return t.Njj(e.registrar())}),t.EFF(1," Registrar "),t.k0s()}if(2&a){const d=t.XpG();t.Y8G("disabled",d.regisForm.invalid)}}let T=(()=>{var a;class c{constructor(){this.authService=(0,t.WQX)(p.u),this.isRegister=!1,(0,f.a)({arrowBack:A.$$C})}ngOnInit(){this.regisForm=new n.gE({name:new n.MJ("",[n.k0.required]),email:new n.MJ("",[n.k0.email,n.k0.required]),phone:new n.MJ("",[n.k0.required,n.k0.pattern(/^[0-9]{10}$/)]),password:new n.MJ("",[n.k0.required,n.k0.minLength(12),a=>{const c=a.value;if(!c)return null;const d=/[A-Z]+/.test(c),i=/[a-z]+/.test(c),e=/[0-9]+/.test(c),r=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(c);return d&&i&&e&&r?null:{passwordStrength:!0}}]),password_confirmation:new n.MJ("",[n.k0.required,P("password")])})}registrar(){this.isRegister=!0,this.authService.register(this.regisForm.value).then(i=>{var e,r;1===(null==i||null===(e=i.data)||void 0===e?void 0:e.success)?(this.authService.navigateByUrl("auth/confirmar-correo/registrar"),this.isRegister=!1,this.regisForm.reset()):(this.isRegister=!1,this.authService.showToast(null==i||null===(r=i.data)||void 0===r?void 0:r.message))}).catch(i=>{var e;this.isRegister=!1,this.authService.showToast(null==i||null===(e=i.error)||void 0===e?void 0:e.message)})}onInput(i){this.pass=i.target.value}onInputConfirm(i){this.pass_confirm=i.target.value}}return(a=c).\u0275fac=function(i){return new(i||a)},a.\u0275cmp=t.VBU({type:a,selectors:[["app-registro"]],standalone:!0,features:[t.aNF],decls:17,vars:6,consts:[["size","large","fill","clear","shape","round","slot","fixed",3,"routerLink"],["slot","icon-only","name","arrow-back"],[1,"content"],[1,"secundario"],["src","assets/logo.webp","alt","logo"],[3,"formGroup"],["formControlName","name","type","text","label","Nombre Completo","placeholder","Alex","labelPlacement","floating","fill","outline"],["formControlName","email","type","email","label","Email","placeholder","ejemplo@gmail.com","labelPlacement","floating","fill","outline"],["formControlName","phone","type","tel","label","WhatsApp","placeholder","3129992212","labelPlacement","floating","fill","outline","maxlength","10"],["formControlName","password","type","password","label","Contrase\xf1a","placeholder","********","label-placement","floating","fill","outline","clearOnEdit","false",3,"ionInput"],["color","medium","slot","end"],["formControlName","password_confirmation","type","password","label","Confirmar contrase\xf1a","placeholder","********","labelPlacement","floating","fill","outline","clearOnEdit","false",3,"ionInput"],[1,"registar"],[3,"disabled"],["name","lines-small"],[3,"click","disabled"]],template:function(i,e){1&i&&(t.j41(0,"ion-content")(1,"ion-button",0),t.nrm(2,"ion-icon",1),t.k0s(),t.j41(3,"div",2)(4,"div",3),t.nrm(5,"ion-img",4),t.j41(6,"form",5),t.nrm(7,"ion-input",6)(8,"ion-input",7)(9,"ion-input",8),t.j41(10,"ion-input",9),t.bIt("ionInput",function(l){return e.onInput(l)}),t.DNE(11,_,1,0,"ion-input-password-toggle",10),t.k0s(),t.j41(12,"ion-input",11),t.bIt("ionInput",function(l){return e.onInputConfirm(l)}),t.DNE(13,v,1,0,"ion-input-password-toggle",10),t.k0s()(),t.j41(14,"div",12),t.DNE(15,O,2,0,"ion-button")(16,g,2,1,"ion-button",13),t.k0s()()()()),2&i&&(t.R7$(),t.Y8G("routerLink",t.lJ4(5,k)),t.R7$(5),t.Y8G("formGroup",e.regisForm),t.R7$(5),t.vxM(e.pass?11:-1),t.R7$(2),t.vxM(e.pass_confirm?13:-1),t.R7$(2),t.vxM(e.isRegister?15:16))},dependencies:[M.tm,E._c,h.bv,h.Jm,h.W9,h.iq,h.KW,h.$w,h.Wv,h.w2,h.Gw,h.N7,C.Wk,m.MD,n.YN,n.qT,n.BC,n.cb,n.tU,n.X1,n.j4,n.JD],styles:["ion-button[_ngcontent-%COMP%]{--color: black}.content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.secundario[_ngcontent-%COMP%]{width:100vh}ion-img[_ngcontent-%COMP%]{max-width:350px;max-height:350px;width:70%;height:70%;margin:auto}ion-input[_ngcontent-%COMP%]{width:80%;max-width:20rem;display:block;margin:2vh auto}.registar[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0}.registar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-width: 1px;--border-radius: 10px;--border-style: solid;--border-color: #b9b9b956;--box-shadow: 0 4px 8px 0 rgb(0, 0, 0, .25);--background: #185ABC;--color: white;--ripple-color: #7e7c7c;--padding-top: 10px;--padding-bottom: 10px;text-transform:none;width:80%;max-width:20rem;margin-top:1.5rem;height:3rem;margin-bottom:1.3rem;font-size:1.7rem;font-weight:700}"]}),c})();function P(a){return c=>{var d;const i=null===(d=c.parent)||void 0===d?void 0:d.get(a);return i&&c.value!==i.value?{passwordMismatch:!0}:null}}function w(){return a=>{const c=a.value;if(!c)return null;const d=/[A-Z]+/.test(c),i=/[a-z]+/.test(c),e=/[0-9]+/.test(c),r=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(c);return d&&i&&e&&r?null:{passwordStrength:!0}}}},1125:(b,y,o)=>{o.d(y,{u:()=>O});var t=o(467),m=o(5149),n=o(8458),f=o(4558),A=o(3953),h=o(6394),p=o(5083);const C=(0,p.F3)("Preferences",{web:()=>o.e(2924).then(o.bind(o,2924)).then(g=>new g.PreferencesWeb)});var E=o(8638),M=o(5079),k=o(5873),_=o(4412),v=o(7669);let O=(()=>{var g,T=new WeakMap,P=new WeakMap,w=new WeakMap,a=new WeakMap,c=new WeakMap;class d{constructor(){(0,m.A)(this,T,void 0),(0,m.A)(this,P,void 0),(0,m.A)(this,w,void 0),(0,m.A)(this,a,void 0),(0,m.A)(this,c,void 0),this.emailShared=null,(0,f.A)(T,this,(0,A.WQX)(h.Ix)),(0,f.A)(P,this,(0,A.WQX)(E.hG)),(0,f.A)(w,this,(0,A.WQX)(E.K_)),(0,f.A)(a,this,[]),(0,f.A)(c,this,new _.t(null)),(0,M.a)({alertCircle:k.nVl})}setEmail(e){this.emailShared=e}getEmail(){return this.emailShared}get token(){return(0,n.A)(c,this).asObservable()}actualizarToken(e){(0,n.A)(c,this).next(e)}actualizarTokenEnLocal(e){return(0,t.A)(function*(){yield C.set({key:"token",value:e})})()}establecerToken(e){this.actualizarToken(e),this.actualizarTokenEnLocal(e)}obtenerToken(){return(0,t.A)(function*(){const e=yield C.get({key:"token"});if(!e)throw new Error("Token no encontrado");return e.value})()}eliminarToken(){var e=this;return(0,t.A)(function*(){e.actualizarToken(null),yield C.remove({key:"token"})})()}register(e){var r=this;return(0,t.A)(function*(){const l={url:v.c.serverUrl+"auth/register",headers:{"Content-Type":"application/json"},data:JSON.stringify(e)};try{var u;const s=yield p.pX.post(l);return r.establecerToken(null==s||null===(u=s.data)||void 0===u?void 0:u.token),s}catch(s){throw s}})()}login(e){var r=this;return(0,t.A)(function*(){const l={url:v.c.serverUrl+"auth/login",headers:{"Content-Type":"application/json"},data:JSON.stringify(e)};try{var u;const s=yield p.pX.post(l);return r.establecerToken(null==s||null===(u=s.data)||void 0===u?void 0:u.token),s}catch(s){throw s}})()}logout(){var e=this;return(0,t.A)(function*(){const r=yield e.obtenerToken(),l={url:v.c.serverUrl+"auth/logout",headers:{Authorization:`Bearer ${r}`}};try{return yield p.pX.get(l)}catch(u){throw u}})()}perfil(){var e=this;return(0,t.A)(function*(){const r=yield e.obtenerToken(),l={url:v.c.serverUrl+"auth/profile",headers:{Authorization:`Bearer ${r}`}};try{return yield p.pX.get(l)}catch(u){throw u}})()}showAlert(e){var r=this;return(0,t.A)(function*(){yield(yield(0,n.A)(P,r).create({header:"Error de Autenticacion",message:e,buttons:["OK"]})).present()})()}navigateByUrl(e){(0,n.A)(T,this).navigateByUrl(e,{replaceUrl:!0})}showToast(e){var r=this;return(0,t.A)(function*(){const l=yield(0,n.A)(w,r).create({message:e,position:"top",positionAnchor:"header",duration:3e3,icon:"alert-circle",color:"primary"});(0,n.A)(a,r).push(l),1===(0,n.A)(a,r).length&&r.showNextToast()})()}showNextToast(){var e=this;return(0,t.A)(function*(){if((0,n.A)(a,e).length>0){const r=(0,n.A)(a,e)[0];yield r.present(),r.onDidDismiss().then(()=>{(0,n.A)(a,e).shift(),e.showNextToast()})}})()}verificarEmail(e){return(0,t.A)(function*(){const r={url:v.c.serverUrl+"auth/send_reset_password_code",headers:{"Content-Type":"application/json"},data:JSON.stringify(e)};try{return yield p.pX.post(r)}catch(l){throw l}})()}verifyCodeChangePasswd(e){var r=this;return(0,t.A)(function*(){const l={url:v.c.serverUrl+"auth/verify_reset_password_code",headers:{"Content-Type":"application/json"},data:JSON.stringify(e)};try{var u;const s=yield p.pX.post(l);return r.establecerToken(null==s||null===(u=s.data)||void 0===u?void 0:u.token),s}catch(s){throw s}})()}changePasswd(e){var r=this;return(0,t.A)(function*(){const l=yield r.obtenerToken(),u={url:v.c.serverUrl+"auth/reset_password",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},data:JSON.stringify(e)};try{return yield p.pX.put(u)}catch(s){throw s}})()}}return(g=d).\u0275fac=function(e){return new(e||g)},g.\u0275prov=A.jDH({token:g,factory:g.\u0275fac,providedIn:"root"}),d})()},7669:(b,y,o)=>{o.d(y,{c:()=>t});const t={production:!0,serverUrl:"https://valiant-luck-production.up.railway.app/api/"}}}]);