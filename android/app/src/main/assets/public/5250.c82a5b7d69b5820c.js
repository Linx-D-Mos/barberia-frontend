"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5250],{5250:(w,m,n)=>{n.r(m),n.d(m,{RecuperarPage:()=>P});var e=n(3953),d=n(177),a=n(4341),h=n(8638),y=n(5079),M=n(5873),v=n(1125),E=n(8880);let P=(()=>{var p;class k{constructor(r){this.nav=r,this.authService=(0,e.WQX)(v.u),this.isExist=!1,(0,y.a)({arrowBackOutline:M.hGB})}ngOnInit(){this.emailForm=new a.gE({email:new a.MJ("",[a.k0.required,a.k0.email])})}verificar(){this.isExist=!0,this.authService.verificarEmail(this.emailForm.value).then(r=>{var u,c;const A=null===(u=this.emailForm.get("email"))||void 0===u?void 0:u.value;var g;1===(null==r||null===(c=r.data)||void 0===c?void 0:c.success)?(this.authService.setEmail(A),console.log("Email guardado:",A),this.authService.navigateByUrl("auth/confirmar-correo/recuperar"),this.isExist=!1,this.emailForm.reset()):(this.isExist=!1,this.authService.showAlert(null==r||null===(g=r.data)||void 0===g?void 0:g.message))}).catch(r=>{var u;console.log(r),this.isExist=!1,this.authService.showAlert(null==r||null===(u=r.error)||void 0===u?void 0:u.message)})}goBack(){this.nav.back()}}return(p=k).\u0275fac=function(r){return new(r||p)(e.rXU(E.q9))},p.\u0275cmp=e.VBU({type:p,selectors:[["app-recuperar"]],standalone:!0,features:[e.aNF],decls:13,vars:2,consts:[[3,"fullscreen"],["size","large","name","arrow-back-outline",1,"back",3,"click"],[1,"container"],["src","assets/logo.webp",1,"logo"],[3,"formGroup"],["label","Ingresa tu correo","formControlName","email","label-placement","floating","fill","outline","placeholder","ejemplo@gmail.com"],["id","recovery",3,"click"],[1,"reenviar"],[1,"btnReenviar"]],template:function(r,u){1&r&&(e.j41(0,"ion-content",0)(1,"ion-icon",1),e.bIt("click",function(){return u.goBack()}),e.k0s(),e.j41(2,"div",2),e.nrm(3,"ion-img",3),e.j41(4,"form",4),e.nrm(5,"ion-input",5),e.k0s(),e.j41(6,"ion-button",6),e.bIt("click",function(){return u.verificar()}),e.EFF(7," Recuperar "),e.k0s(),e.j41(8,"div",7)(9,"ion-label"),e.EFF(10," \xbfNo recibiste el correo? "),e.k0s()(),e.j41(11,"ion-button",8),e.EFF(12," Reenviar correo "),e.k0s()()()),2&r&&(e.Y8G("fullscreen",!0),e.R7$(4),e.Y8G("formGroup",u.emailForm))},dependencies:[h.iq,a.X1,a.qT,a.BC,a.cb,a.j4,a.JD,h.Jm,h.he,h.$w,h.KW,h.W9,d.MD],styles:["ion-content[_ngcontent-%COMP%]{padding:0 20px}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.logo[_ngcontent-%COMP%]{margin:auto;width:300px;height:300px}form[_ngcontent-%COMP%]{padding-top:50px;width:80%;text-align:left}#recovery[_ngcontent-%COMP%]{width:80%;font-size:20px;padding:20px 0 0}.reenviar[_ngcontent-%COMP%]{margin-top:15px}.btnReenviar[_ngcontent-%COMP%]{--background: rgb(184, 183, 183);width:80%;font-size:16px;padding-top:3%}.back[_ngcontent-%COMP%]{padding-top:6%;margin-left:5%}"]}),k})()},1125:(w,m,n)=>{n.d(m,{u:()=>u});var e=n(467),d=n(5149),a=n(8458),h=n(4558),y=n(3953),M=n(6394),v=n(5083);const E=(0,v.F3)("Preferences",{web:()=>n.e(2924).then(n.bind(n,2924)).then(c=>new c.PreferencesWeb)});var P=n(8638),p=n(5079),k=n(5873),T=n(4412),r=n(7669);let u=(()=>{var c,A=new WeakMap,g=new WeakMap,C=new WeakMap,f=new WeakMap,O=new WeakMap;class B{constructor(){(0,d.A)(this,A,void 0),(0,d.A)(this,g,void 0),(0,d.A)(this,C,void 0),(0,d.A)(this,f,void 0),(0,d.A)(this,O,void 0),this.emailShared=null,(0,h.A)(A,this,(0,y.WQX)(M.Ix)),(0,h.A)(g,this,(0,y.WQX)(P.hG)),(0,h.A)(C,this,(0,y.WQX)(P.K_)),(0,h.A)(f,this,[]),(0,h.A)(O,this,new T.t(null)),(0,p.a)({alertCircle:k.nVl})}setEmail(t){this.emailShared=t}getEmail(){return this.emailShared}get token(){return(0,a.A)(O,this).asObservable()}actualizarToken(t){(0,a.A)(O,this).next(t)}actualizarTokenEnLocal(t){return(0,e.A)(function*(){yield E.set({key:"token",value:t})})()}establecerToken(t){this.actualizarToken(t),this.actualizarTokenEnLocal(t)}obtenerToken(){return(0,e.A)(function*(){const t=yield E.get({key:"token"});if(!t)throw new Error("Token no encontrado");return t.value})()}eliminarToken(){var t=this;return(0,e.A)(function*(){t.actualizarToken(null),yield E.remove({key:"token"})})()}register(t){var o=this;return(0,e.A)(function*(){const l={url:r.c.serverUrl+"auth/register",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};try{var s;const i=yield v.pX.post(l);return o.establecerToken(null==i||null===(s=i.data)||void 0===s?void 0:s.token),i}catch(i){throw i}})()}login(t){var o=this;return(0,e.A)(function*(){const l={url:r.c.serverUrl+"auth/login",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};try{var s;const i=yield v.pX.post(l);return o.establecerToken(null==i||null===(s=i.data)||void 0===s?void 0:s.token),i}catch(i){throw i}})()}logout(){var t=this;return(0,e.A)(function*(){const o=yield t.obtenerToken(),l={url:r.c.serverUrl+"auth/logout",headers:{Authorization:`Bearer ${o}`}};try{return yield v.pX.get(l)}catch(s){throw s}})()}perfil(){var t=this;return(0,e.A)(function*(){const o=yield t.obtenerToken(),l={url:r.c.serverUrl+"auth/profile",headers:{Authorization:`Bearer ${o}`}};try{return yield v.pX.get(l)}catch(s){throw s}})()}showAlert(t){var o=this;return(0,e.A)(function*(){yield(yield(0,a.A)(g,o).create({header:"Error de Autenticacion",message:t,buttons:["OK"]})).present()})()}navigateByUrl(t){(0,a.A)(A,this).navigateByUrl(t,{replaceUrl:!0})}showToast(t){var o=this;return(0,e.A)(function*(){const l=yield(0,a.A)(C,o).create({message:t,position:"top",positionAnchor:"header",duration:3e3,icon:"alert-circle",color:"primary"});(0,a.A)(f,o).push(l),1===(0,a.A)(f,o).length&&o.showNextToast()})()}showNextToast(){var t=this;return(0,e.A)(function*(){if((0,a.A)(f,t).length>0){const o=(0,a.A)(f,t)[0];yield o.present(),o.onDidDismiss().then(()=>{(0,a.A)(f,t).shift(),t.showNextToast()})}})()}verificarEmail(t){return(0,e.A)(function*(){const o={url:r.c.serverUrl+"auth/send_reset_password_code",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};try{return yield v.pX.post(o)}catch(l){throw l}})()}verifyCodeChangePasswd(t){var o=this;return(0,e.A)(function*(){const l={url:r.c.serverUrl+"auth/verify_reset_password_code",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)};try{var s;const i=yield v.pX.post(l);return o.establecerToken(null==i||null===(s=i.data)||void 0===s?void 0:s.token),i}catch(i){throw i}})()}changePasswd(t){var o=this;return(0,e.A)(function*(){const l=yield o.obtenerToken(),s={url:r.c.serverUrl+"auth/reset_password",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},data:JSON.stringify(t)};try{return yield v.pX.put(s)}catch(i){throw i}})()}}return(c=B).\u0275fac=function(t){return new(t||c)},c.\u0275prov=y.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),B})()},7669:(w,m,n)=>{n.d(m,{c:()=>e});const e={production:!0,serverUrl:"https://valiant-luck-production.up.railway.app/api/"}}}]);